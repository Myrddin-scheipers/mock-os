<div class="menu first">
    <ul class="menu-list">
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                    <path
                        d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                </svg>
                <span>Undo </span>
                <span>CTRL+Z</span>
            </button>
        </li>
    </ul>
    <ul class="menu-list">
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-folder-plus" viewBox="0 0 16 16">
                    <path
                        d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z" />
                    <path
                        d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z" />
                </svg>
                <span>Create folder </span>
                <span>CTRL +</span>
            </button>
        </li>
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-file-earmark-plus" viewBox="0 0 16 16">
                    <path
                        d="M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z" />
                    <path
                        d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z" />
                </svg>
                <span>Create file </span>
                <span>CTRL+C</span>
            </button>
        </li>
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-textarea-resize" viewBox="0 0 16 16">
                    <path
                        d="M0 4.5A2.5 2.5 0 0 1 2.5 2h11A2.5 2.5 0 0 1 16 4.5v7a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 11.5v-7zM2.5 3A1.5 1.5 0 0 0 1 4.5v7A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 13.5 3h-11zm10.854 4.646a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708l3-3a.5.5 0 0 1 .708 0zm0 2.5a.5.5 0 0 1 0 .708l-.5.5a.5.5 0 0 1-.708-.708l.5-.5a.5.5 0 0 1 .708 0z" />
                </svg>
                <span>Select files </span>
                <span>CTRL+</span>
            </button>
        </li>
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-sliders2" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M10.5 1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4H1.5a.5.5 0 0 1 0-1H10V1.5a.5.5 0 0 1 .5-.5ZM12 3.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-6.5 2A.5.5 0 0 1 6 6v1.5h8.5a.5.5 0 0 1 0 1H6V10a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5ZM1 8a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 1 8Zm9.5 2a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V13H1.5a.5.5 0 0 1 0-1H10v-1.5a.5.5 0 0 1 .5-.5Zm1.5 2.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z" />
                </svg>
                <span>Settings</span>
                <span class="disabled">CTRL+V</span>
            </button>
        </li>
    </ul>
    <ul class="menu-list">
        <li class="menu-item">
            <button class="menu-button">
                <svg></svg>
                <span>Select All</span>
                <span>CTRL+A</span>
            </button>
        </li>
    </ul>
</div>
<div class="menu context_window">
    <ul class="menu-list">
        <li class="menu-item">
            <button class="menu-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                    <path
                        d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                </svg>
                <span onclick="duplicate()">Duplicate</span>
                <span>SHIFT+D</span>
            </button>
        </li>
    </ul>
    <ul class="menu-list">
        <li class="menu-item">
            <button onclick='appwindow.fullscreen(document.querySelector(".window.active"))'
                class="menu-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-folder-plus" viewBox="0 0 16 16">
                    <path
                        d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z" />
                    <path
                        d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z" />
                </svg>
                <span>fullscreen app</span>
                <span>SHIFT+F11</span>
            </button>
        </li>
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-file-earmark-plus" viewBox="0 0 16 16">
                    <path
                        d="M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z" />
                    <path
                        d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z" />
                </svg>
                <span>Share system</span>
                <span>CTRL + 1</span>
            </button>
        </li>
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-textarea-resize" viewBox="0 0 16 16">
                    <path
                        d="M0 4.5A2.5 2.5 0 0 1 2.5 2h11A2.5 2.5 0 0 1 16 4.5v7a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 11.5v-7zM2.5 3A1.5 1.5 0 0 0 1 4.5v7A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 13.5 3h-11zm10.854 4.646a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708l3-3a.5.5 0 0 1 .708 0zm0 2.5a.5.5 0 0 1 0 .708l-.5.5a.5.5 0 0 1-.708-.708l.5-.5a.5.5 0 0 1 .708 0z" />
                </svg>
                <span>Select files </span>
                <span>CTRL+</span>
            </button>
        </li>
        <li class="menu-item">
            <button onclick="openapp('settings', false)" class="menu-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-sliders2" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M10.5 1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4H1.5a.5.5 0 0 1 0-1H10V1.5a.5.5 0 0 1 .5-.5ZM12 3.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-6.5 2A.5.5 0 0 1 6 6v1.5h8.5a.5.5 0 0 1 0 1H6V10a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5ZM1 8a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 1 8Zm9.5 2a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V13H1.5a.5.5 0 0 1 0-1H10v-1.5a.5.5 0 0 1 .5-.5Zm1.5 2.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z" />
                </svg>
                <span>Settings</span>
                <span class="disabled">CTRL+V</span>
            </button>
        </li>
    </ul>
    <ul class="menu-list">
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg></svg>
                <span>Select All</span>
                <span>CTRL+A</span>
            </button>
        </li>
    </ul>
</div>

<div class="menu context_files">
    <ul class="menu-list">
        <li class="menu-item">
            <button class="menu-button renamebutton">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                    <path
                        d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                </svg>
                <span>Rename</span>
                <span>test</span>
            </button>
        </li>
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-textarea-resize" viewBox="0 0 16 16">
                    <path
                        d="M0 4.5A2.5 2.5 0 0 1 2.5 2h11A2.5 2.5 0 0 1 16 4.5v7a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 11.5v-7zM2.5 3A1.5 1.5 0 0 0 1 4.5v7A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 13.5 3h-11zm10.854 4.646a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708l3-3a.5.5 0 0 1 .708 0zm0 2.5a.5.5 0 0 1 0 .708l-.5.5a.5.5 0 0 1-.708-.708l.5-.5a.5.5 0 0 1 .708 0z" />
                </svg>
                <span>Info</span>
                <span></span>
            </button>
        </li>
        <li class="menu-item">
            <button class="menu-button openwith_btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-file-earmark-plus" viewBox="0 0 16 16">
                    <path
                        d="M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z" />
                    <path
                        d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z" />
                </svg>
                <span>Open with</span>
                <span>CTRL+click</span>
            </button>
        </li>
    </ul>
    <ul class="menu-list">

        <li class="menu-item">
            <button class="menu-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-sliders2" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M10.5 1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4H1.5a.5.5 0 0 1 0-1H10V1.5a.5.5 0 0 1 .5-.5ZM12 3.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-6.5 2A.5.5 0 0 1 6 6v1.5h8.5a.5.5 0 0 1 0 1H6V10a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5ZM1 8a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 1 8Zm9.5 2a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V13H1.5a.5.5 0 0 1 0-1H10v-1.5a.5.5 0 0 1 .5-.5Zm1.5 2.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z" />
                </svg>
                <span>Settings</span>
                <span>CTRL+V</span>
            </button>
        </li>
        <li class="menu-item">
            <button onclick="desktop.showFilepicker()" class="menu-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                    <path
                        d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                </svg>
                <span>Change Background</span>
                <span>CTRL+B</span>
            </button>
        </li>
    </ul>
    <ul class="menu-list">
        <li class="menu-item">
            <button class="menu-button disabled">
                <svg></svg>
                <span>Select All</span>
                <span>CTRL+A</span>
            </button>
        </li>
    </ul>
</div>
<script>
    document.addEventListener("click", hidecontext);
    function hidecontext() {
        if (window.frameElement) {
            window.top.hidecontext();
            return;
        }
        document.querySelector(".menu.first").style.display = "none";
        document.querySelector(".menu.context_window").style.display = "none";
        document.querySelector(".menu.context_files").style.display = "none";
    }
    document.addEventListener('contextmenu', contextmenu);
    function contextmenu(event, frameElement) {
        if (window.frameElement) {
            window.top.contextmenu(event, window.frameElement);
            return;
        }
        hidecontext();

        document.querySelector(".menu.first").style.display = "none";
        document.querySelector(".menu.context_window").style.display = "none";
        document.querySelector(".menu.context_files").style.display = "none";
        event.preventDefault();
        let context;
        if (event.target) {
            if (event.target.closest(".window") != undefined) {
                // clicked in the window element
                context = document.querySelector(".menu.context_window");
            } else if (event.target.closest(".files") != undefined) {
                // clicked on home files list
                if (event.target.closest(".group") != undefined) {
                    event.target.closest(".group").classList.add("rename");
                    event.target.closest(".group").classList.add("toopen");
                }
                context = document.querySelector(".menu.context_files");
            } else {
                context = document.querySelector(".menu.first");
            }
        } else {
            return;
        }
        let x = event.pageX;
        let y = event.pageY;
        if (frameElement != undefined) {
            let boundingrect = frameElement.getBoundingClientRect();
            if (boundingrect) {
                x += boundingrect["left"];
                y += boundingrect["top"];
            }
        }
        context.style.position = "absolute";
        context.style.display = "block";
        if (document.body.clientHeight < context.childNodes[0].parentNode.clientHeight + event.clientY) {
            y = y - context.childNodes[0].parentNode.clientHeight;
        }
        if (document.body.clientWidth < context.childNodes[0].parentNode.clientWidth + event.clientX) {
            x = x - context.childNodes[0].parentNode.clientWidth;
        }
        context.style.left = `${x}px`;
        context.style.top = `${y}px`;
    }
</script>
<style>
    .menu {
        height: auto;
        z-index: 148;
        display: none;
        position: absolute;
        flex-direction: column;
        background-color: var(--color-bg-secondary);
        border-radius: var(--radius);
        box-shadow: 0 10px 20px rgba(64, 64, 64, 0.15);
        top: 10px;
        left: 10px;
        width: 208px;

    }

    .menu-list+.menu-list {
        border-top: 1px solid #ddd;
    }

    .menu-item {
        position: relative;
    }

    .menu-button {
        font: inherit;
        color: inherit;
        outline: none;
        border: 0;
        padding: 8px 8px;
        width: 100%;

        border-radius: var(--radius);
        display: flex;
        align-items: center;
        position: relative;
        background-color: var(--color-bg-secondary);
        overflow: hidden;
    }

    .menu-button:hover {
        background-color: var(--color-bg-primary-offset);
    }

    .menu-button:hover+.menu-sub-list {
        display: flex;
    }

    .menu-button:hover svg {
        stroke: var(--color-text-primary);
    }

    .menu-button:hover svg.fa {
        color: var(--color-text-primary);
    }

    .menu-button svg {
        width: 20px;
        height: 20px;
        margin-right: 10px;
        stroke: var(--color-text-primary-offset);
        display: none;
    }

    .menu-button svg.fa {
        width: 20px;
        height: 20px;
        margin-right: 10px;
        color: var(--color-text-primary-offset);
    }





    .menu.settings {
        width: 300px;
    }

    .menu-list {
        max-width: calc(100% - 20px);
        margin: 0;
        display: block;
        width: 100%;
        padding: 8px;
    }

    .menu-list,
    ul {
        list-style-type: none;
    }

    .menu-item {
        position: relative;
    }

    .menu-button {
        font: inherit;
        color: inherit;
        outline: none;
        border: 0;
        padding: 8px 8px;
        width: 100%;

        border-radius: var(--radius);
        display: flex;
        align-items: center;
        position: relative;
        background-color: var(--color-bg-secondary);
        overflow: hidden;
    }

    .menu-button:hover {
        background-color: var(--color-bg-primary-offset);
    }

    .menu-button:hover+.menu-sub-list {
        display: flex;
    }

    .menu-button:hover svg {
        stroke: var(--color-text-primary);
    }

    .menu-button:hover svg.fa {
        color: var(--color-text-primary);
    }

    .context-button:hover svg.fa {
        color: var(--color-text-primary);
    }

    .menu-button svg {
        width: 20px;
        height: 20px;
        margin-right: 10px;
        stroke: var(--color-text-primary-offset);
        display: none;
    }

    .menu-button svg.fa {
        width: 20px;
        height: 20px;
        margin-right: 10px;
        color: var(--color-text-primary-offset);
    }

    .context-button svg.fa {
        height: 30px;
        margin-right: 10px;
        color: var(--color-text-primary-offset);
    }

    .menu-button svg:nth-of-type(2) {
        margin-right: 0;
        position: absolute;
        right: 8px;
    }

    .menu-button span:nth-of-type(2) {
        margin-right: 0;
        position: absolute;
        right: 8px;
        font-size: x-small;
        margin-top: 20px;
    }

    .menu-button span.second {
        color: var(--color-text-primary-offset);
        font-size: small;
        margin-left: 5px;
    }

    .menu-button.tor span:nth-of-type(1) {
        color: var(--color-text-primary-offset);
        font-size: small;
        margin-left: 5px;
    }

    .menu-button--delete:hover {
        color: var(--color-red);
    }

    .menu-button--delete:hover svg:first-of-type {
        stroke: var(--color-red);
    }

    .menu-button--orange svg:first-of-type {
        stroke: var(--color-orange);
        color: var(--color-orange);
    }

    .menu-button--green svg:first-of-type {
        stroke: var(--color-green);
    }

    .menu-button--purple svg:first-of-type {
        stroke: var(--color-purple);
    }

    .menu-button--black svg:first-of-type {
        stroke: var(--color-black);
    }

    .menu-button--checked svg:nth-of-type(2) {
        stroke: var(--color-purple);
    }

    .menu-button span.disabled,
    .context-button:hover:disabled {
        color: var(--color-text-primary-offset);
    }

    .menu-button:hover:disabled,
    .context-button:hover:disabled {
        background-color: var(--color-bg-secondary);
    }

    .context-button p {
        height: 10px;
    }
</style>